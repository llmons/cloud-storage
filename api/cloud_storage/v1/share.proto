syntax = "proto3";

import "google/api/annotations.proto";

option go_package = "cloud-storage/api/cloud_storage/v1;v1";

// ---------------------- Service 定义 ----------------------

service share {
  // 获取资源详情
  rpc ShareBasicDetail(ShareBasicDetailRequest) returns (ShareBasicDetailReply) {
    option (google.api.http) = {
      get: "/share/basic/detail"
    };
  }

  // 创建分享记录
  rpc ShareBasicCreate(ShareBasicCreateRequest) returns (ShareBasicCreateReply) {
    option (google.api.http) = {
      post: "/share/basic/create"
      body: "*"
    };
  }

  // 资源保存
  rpc ShareBasicSave(ShareBasicSaveRequest) returns (ShareBasicSaveReply) {
    option (google.api.http) = {
      post: "/share/basic/save"
      body: "*"
    };
  }
}

// ---------------------- Messages 定义 ----------------------

message ShareBasicSaveRequest {
  string repository_identity = 1;
  int64 parent_id = 2;
}

message ShareBasicSaveReply {
  string identity = 1;
}

message ShareBasicDetailRequest {
  string identity = 1;
}

message ShareBasicDetailReply {
  string repository_identity = 1;
  string name = 2;
  string ext = 3;
  int64 size = 4;
  string path = 5;
}

message ShareBasicCreateRequest {
  string user_repository_identity = 1;
  int32 expired_time = 2;
}

message ShareBasicCreateReply {
  string identity = 1;
}
